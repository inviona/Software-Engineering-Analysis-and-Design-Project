<svg viewBox="0 0 1000 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="500" y="30" text-anchor="middle" font-size="24" font-weight="bold">Tirana's Public Transportation Management System - Activity Diagram</text>
  
  <!-- Swimlane Headers -->
  <rect x="50" y="50" width="225" height="730" fill="#f5f5f5" stroke="#000000" stroke-width="2"/>
  <rect x="275" y="50" width="225" height="730" fill="#e6f2ff" stroke="#000000" stroke-width="2"/>
  <rect x="500" y="50" width="225" height="730" fill="#e6ffe6" stroke="#000000" stroke-width="2"/>
  <rect x="725" y="50" width="225" height="730" fill="#ffe6e6" stroke="#000000" stroke-width="2"/>
  
  <text x="162.5" y="80" text-anchor="middle" font-size="18" font-weight="bold">User/Passenger</text>
  <text x="387.5" y="80" text-anchor="middle" font-size="18" font-weight="bold">Mobile/Web App</text>
  <text x="612.5" y="80" text-anchor="middle" font-size="18" font-weight="bold">Backend System</text>
  <text x="837.5" y="80" text-anchor="middle" font-size="18" font-weight="bold">Admin Dashboard</text>
  
  <line x1="50" y1="90" x2="950" y2="90" stroke="#000000" stroke-width="2"/>
  
  <!-- Start Point -->
  <circle cx="162.5" cy="120" r="10" fill="#000000"/>
  
  <!-- User Login -->
  <rect x="112.5" y="145" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="162.5" y="170" text-anchor="middle" font-size="14">Open App</text>
  <line x1="162.5" y1="130" x2="162.5" y2="145" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- App Login Screen -->
  <rect x="337.5" y="145" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="387.5" y="170" text-anchor="middle" font-size="14">Login Screen</text>
  <line x1="212.5" y1="165" x2="337.5" y2="165" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- User enters credentials -->
  <rect x="112.5" y="215" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="162.5" y="240" text-anchor="middle" font-size="14">Enter Credentials</text>
  <line x1="387.5" y1="185" x2="387.5" y2="200" stroke="#000000" stroke-width="2"/>
  <line x1="387.5" y1="200" x2="162.5" y2="200" stroke="#000000" stroke-width="2"/>
  <line x1="162.5" y1="200" x2="162.5" y2="215" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- App submits credentials -->
  <rect x="337.5" y="215" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="387.5" y="240" text-anchor="middle" font-size="14">Submit Credentials</text>
  <line x1="212.5" y1="235" x2="337.5" y2="235" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Backend validates -->
  <rect x="562.5" y="215" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="612.5" y="240" text-anchor="middle" font-size="14">Validate User</text>
  <line x1="437.5" y1="235" x2="562.5" y2="235" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Decision point -->
  <polygon points="612.5,290 592.5,310 612.5,330 632.5,310" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="612.5" y="310" text-anchor="middle" font-size="14">Valid?</text>
  <line x1="612.5" y1="255" x2="612.5" y2="290" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Invalid login path -->
  <line x1="592.5" y1="310" x2="470" y2="310" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="550" y="300" text-anchor="middle" font-size="14" fill="#ff0000">No</text>
  
  <rect x="370" y="290" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="420" y="315" text-anchor="middle" font-size="14">Show Error</text>
  
  <line x1="370" y1="310" x2="290" y2="310" stroke="#000000" stroke-width="2"/>
  <line x1="290" y1="310" x2="290" y2="200" stroke="#000000" stroke-width="2"/>
  <line x1="290" y1="200" x2="162.5" y2="200" stroke="#000000" stroke-width="2"/>
  
  <!-- Valid login path -->
  <line x1="632.5" y1="310" x2="787.5" y2="310" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="700" y="300" text-anchor="middle" font-size="14" fill="#008000">Yes</text>
  
  <rect x="737.5" y="290" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="787.5" y="315" text-anchor="middle" font-size="14">Log Activity</text>
  
  <!-- Main Menu -->
  <rect x="337.5" y="360" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="387.5" y="385" text-anchor="middle" font-size="14">Show Main Menu</text>
  <line x1="787.5" y1="330" x2="787.5" y2="345" stroke="#000000" stroke-width="2"/>
  <line x1="787.5" y1="345" x2="387.5" y2="345" stroke="#000000" stroke-width="2"/>
  <line x1="387.5" y1="345" x2="387.5" y2="360" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- User selects function -->
  <rect x="112.5" y="360" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="162.5" y="385" text-anchor="middle" font-size="14">Select Function</text>
  <line x1="337.5" y1="380" x2="212.5" y2="380" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Decision point for function -->
  <polygon points="162.5,430 142.5,450 162.5,470 182.5,450" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <line x1="162.5" y1="400" x2="162.5" y2="430" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Function labels -->
  <text x="87.5" y="450" text-anchor="middle" font-size="12" fill="#ff8c00">Buy Ticket</text>
  <text x="162.5" y="490" text-anchor="middle" font-size="12" fill="#0000ff">Plan Journey</text>
  <text x="237.5" y="450" text-anchor="middle" font-size="12" fill="#008000">Track Vehicle</text>
  
  <!-- Plan Journey branch -->
  <line x1="162.5" y1="470" x2="162.5" y2="510" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="112.5" y="510" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="162.5" y="535" text-anchor="middle" font-size="14">Enter Origin/Dest</text>
  
  <rect x="337.5" y="510" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="387.5" y="535" text-anchor="middle" font-size="14">Process Request</text>
  <line x1="212.5" y1="530" x2="337.5" y2="530" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="562.5" y="510" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="612.5" y="535" text-anchor="middle" font-size="14">Calculate Routes</text>
  <line x1="437.5" y1="530" x2="562.5" y2="530" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="337.5" y="580" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="387.5" y="605" text-anchor="middle" font-size="14">Display Routes</text>
  <line x1="612.5" y1="550" x2="612.5" y2="565" stroke="#000000" stroke-width="2"/>
  <line x1="612.5" y1="565" x2="387.5" y2="565" stroke="#000000" stroke-width="2"/>
  <line x1="387.5" y1="565" x2="387.5" y2="580" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Track Vehicle branch -->
  <line x1="182.5" y1="450" x2="237.5" y2="450" stroke="#000000" stroke-width="2"/>
  <line x1="237.5" y1="450" x2="237.5" y2="630" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="112.5" y="630" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="162.5" y="655" text-anchor="middle" font-size="14">Select Vehicle</text>
  <line x1="237.5" y1="650" x2="212.5" y2="650" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="337.5" y="630" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="387.5" y="655" text-anchor="middle" font-size="14">Request Location</text>
  <line x1="212.5" y1="650" x2="337.5" y2="650" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="562.5" y="630" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="612.5" y="655" text-anchor="middle" font-size="14">Get GPS Data</text>
  <line x1="437.5" y1="650" x2="562.5" y2="650" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="337.5" y="700" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="387.5" y="725" text-anchor="middle" font-size="14">Show Live Map</text>
  <line x1="612.5" y1="670" x2="612.5" y2="685" stroke="#000000" stroke-width="2"/>
  <line x1="612.5" y1="685" x2="387.5" y2="685" stroke="#000000" stroke-width="2"/>
  <line x1="387.5" y1="685" x2="387.5" y2="700" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Buy Ticket branch -->
  <line x1="142.5" y1="450" x2="87.5" y2="450" stroke="#000000" stroke-width="2"/>
  <line x1="87.5" y1="450" x2="87.5" y2="630" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="37.5" y="630" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="87.5" y="655" text-anchor="middle" font-size="14">Select Ticket Type</text>
  
  <!-- Analytics connections -->
  <rect x="787.5" y="510" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="837.5" y="535" text-anchor="middle" font-size="14">Collect Analytics</text>
  <line x1="662.5" y1="530" x2="787.5" y2="530" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="787.5" y="630" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="837.5" y="655" text-anchor="middle" font-size="14">Track Fleet</text>
  <line x1="662.5" y1="650" x2="787.5" y2="650" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- User view routes -->
  <line x1="387.5" y1="620" x2="387.5" y2="630" stroke="#000000" stroke-width="2"/>
  <line x1="387.5" y1="630" x2="320" y2="630" stroke="#000000" stroke-width="2"/>
  <line x1="320" y1="630" x2="320" y2="600" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="320" y1="600" x2="162.5" y2="600" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="112.5" y="580" width="100" height="40" rx="15" ry="15" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <text x="162.5" y="605" text-anchor="middle" font-size="14">View Routes</text>
  
  <!-- End point -->
  <circle cx="387.5" cy="770" r="10" fill="#ffffff" stroke="#000000" stroke-width="2"/>
  <circle cx="387.5" cy="770" r="6" fill="#000000"/>
  <line x1="387.5" y1="740" x2="387.5" y2="770" stroke="#000000" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#000"/>
    </marker>
  </defs>
</svg>